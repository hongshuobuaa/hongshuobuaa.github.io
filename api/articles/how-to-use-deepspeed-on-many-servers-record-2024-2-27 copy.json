{"title":"如何使用deepspeed进行多机多卡训练（简易版本）_2024_2_27","uid":"aadb4a19073e41a58c91edd26f1f5046","slug":"how-to-use-deepspeed-on-many-servers-record-2024-2-27 copy","date":"2024-02-27T15:25:11.000Z","updated":"2024-02-27T15:53:49.050Z","comments":true,"path":"api/articles/how-to-use-deepspeed-on-many-servers-record-2024-2-27 copy.json","keywords":null,"cover":"https://raw.githubusercontent.com/microsoft/DeepSpeed/aed599b4422b1cdf7397abb05a58c3726523a333/docs/assets/images/DeepSpeed_light.svg","content":"<p>deepspeed多机多卡搭建记录（简易）</p>\n<h1 id=\"0-docker网络搭建\"><a href=\"#0-docker网络搭建\" class=\"headerlink\" title=\"0 docker网络搭建\"></a>0 docker网络搭建</h1><p><a href=\"https://www.jianshu.com/p/2792ebf9af71\">https://www.jianshu.com/p/2792ebf9af71</a></p>\n<h1 id=\"1-配置免密登录\"><a href=\"#1-配置免密登录\" class=\"headerlink\" title=\"1 配置免密登录\"></a>1 配置免密登录</h1><p><a href=\"https://blog.csdn.net/qq_40732354/article/details/95061228\">https://blog.csdn.net/qq_40732354/article/details/95061228</a></p>\n<h1 id=\"2-deepspeed配置\"><a href=\"#2-deepspeed配置\" class=\"headerlink\" title=\"2 deepspeed配置\"></a>2 deepspeed配置</h1><p><a href=\"https://www.jianshu.com/p/2792ebf9af71\">https://www.jianshu.com/p/2792ebf9af71</a><br>注：hostfile为 <code>ip slot=[gpu数量]</code>即可</p>\n<h1 id=\"bug-解决方案\"><a href=\"#bug-解决方案\" class=\"headerlink\" title=\"bug 解决方案\"></a>bug 解决方案</h1><h2 id=\"deepspeed-报错-up-NCCL-communicator-and-retreiving-ncclUniqueId-from-0-via-c10d-key-value-store-解决\"><a href=\"#deepspeed-报错-up-NCCL-communicator-and-retreiving-ncclUniqueId-from-0-via-c10d-key-value-store-解决\" class=\"headerlink\" title=\"deepspeed 报错 up NCCL communicator and retreiving ncclUniqueId from [0] via c10d key-value store 解决\"></a>deepspeed 报错 up NCCL communicator and retreiving ncclUniqueId from [0] via c10d key-value store 解决</h2><p><a href=\"https://blog.csdn.net/qq874455953/article/details/134408257\">https://blog.csdn.net/qq874455953/article/details/134408257</a></p>\n","feature":true,"text":"deepspeed多机多卡搭建记录（简易） 0 docker网络搭建https://www.jianshu.com/p/2792ebf9af71 1 配置免密登...","permalink":"/post/how-to-use-deepspeed-on-many-servers-record-2024-2-27 copy","photos":[],"count_time":{"symbolsCount":387,"symbolsTime":"1 mins."},"categories":[{"name":"Daily record","slug":"Daily-record","count":2,"path":"api/categories/Daily-record.json"}],"tags":[{"name":"Daily record","slug":"Daily-record","count":2,"path":"api/tags/Daily-record.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#0-docker%E7%BD%91%E7%BB%9C%E6%90%AD%E5%BB%BA\"><span class=\"toc-text\">0 docker网络搭建</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#1-%E9%85%8D%E7%BD%AE%E5%85%8D%E5%AF%86%E7%99%BB%E5%BD%95\"><span class=\"toc-text\">1 配置免密登录</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#2-deepspeed%E9%85%8D%E7%BD%AE\"><span class=\"toc-text\">2 deepspeed配置</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#bug-%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88\"><span class=\"toc-text\">bug 解决方案</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#deepspeed-%E6%8A%A5%E9%94%99-up-NCCL-communicator-and-retreiving-ncclUniqueId-from-0-via-c10d-key-value-store-%E8%A7%A3%E5%86%B3\"><span class=\"toc-text\">deepspeed 报错 up NCCL communicator and retreiving ncclUniqueId from [0] via c10d key-value store 解决</span></a></li></ol></li></ol>","author":{"name":"Shuo Hong","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/65355046?v=4","link":"/","description":"你好，我是来自北京航空航天大学的洪硕","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"Hex简易命令（转载）","uid":"247ac1e7bd99591b6c3fd2ab7eabb900","slug":"Hexo建议命令","date":"2024-02-27T16:17:50.465Z","updated":"2024-02-27T16:17:51.693Z","comments":true,"path":"api/articles/Hexo建议命令.json","keywords":null,"cover":"https://raw.githubusercontent.com/hexojs/logo/master/hexo-logo-avatar.png","text":"Welcome to Hexo! This is your very first post. Check documentation for more info...","permalink":"/post/Hexo建议命令","photos":[],"count_time":{"symbolsCount":444,"symbolsTime":"1 mins."},"categories":[],"tags":[],"author":{"name":"Shuo Hong","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/65355046?v=4","link":"/","description":"你好，我是来自北京航空航天大学的洪硕","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true},"next_post":{"title":"LLM简单评测_2024_2_26","uid":"801591854ef42c23b79225abd4e53d59","slug":"LLM简单评测","date":"2024-02-27T15:25:11.000Z","updated":"2024-02-27T15:55:03.831Z","comments":true,"path":"api/articles/LLM简单评测.json","keywords":null,"cover":"https://tse3-mm.cn.bing.net/th/id/OIP-C.aQeHfvYFa03WdbBRBOksSQHaHa?rs=1&pid=ImgDetMain","text":"#traing_of_fintuning使用freeze进行微调，目前微调结果如下：微调基于&#x2F;llm&#x2F;LLaMA-Factory&#x2F;...","permalink":"/post/LLM简单评测","photos":[],"count_time":{"symbolsCount":"1.6k","symbolsTime":"1 mins."},"categories":[{"name":"Daily record","slug":"Daily-record","count":2,"path":"api/categories/Daily-record.json"}],"tags":[{"name":"Daily record","slug":"Daily-record","count":2,"path":"api/tags/Daily-record.json"}],"author":{"name":"Shuo Hong","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/65355046?v=4","link":"/","description":"你好，我是来自北京航空航天大学的洪硕","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true}}